<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script>
/*function setTimer() {
  requestAnimationFrame(function () {
    return '我是setTimer函数的返回值';
  });
}*/
// console.log(setTimer()); //undefined

function setTimer() {
  return new Promise((resolve, reject) => {
    requestAnimationFrame(function () {
      return Promise.resolve('我是setTimer函数的返回值');
    });
  });
}

setTimer().then(res => {
  console.log(res); //我是setTimer函数的返回值
});


/*let async2 = () => new Promise((resolve, reject) => {

  setTimeout(() => {

    resolve(0);

  }, 100); // 假装这里的操作需要点时间

});*/


function getSomeData2() {

  return new Promise(function body(resolve, reject) {

    console.log(`async2() == ${1}`);

    if (1 <= 0) {

      resolve(1);

    } else {

      setTimeout(() => {

        body(resolve, reject);

      }, 10); // 避免过于频繁的调用导致UI卡死

    }
  });
}

getSomeData2().then(res => {
  console.log(res);
});


</script>
</body>
</html>
